{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/PBL6_Toystore/client/src/components/mainpages/auth/Login.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { ShowErrMsg, ShowSuccessMsg } from '../utils/notification/notification'; ////initial state\n\nconst initialState = {\n  email: '',\n  password: '',\n  err: '',\n  success: ''\n};\n\nfunction Login() {\n  const [user, setUser] = useState({\n    initialState\n  });\n  const {\n    email,\n    password,\n    err,\n    success\n  } = user;\n\n  const onChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser({ ...user,\n      [name]: value,\n      err: '',\n      success: ''\n    });\n  };\n\n  const loginSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/user/login', { ...user\n      });\n      setUser({ ...user,\n        err: '',\n        success: res.data.msg\n      });\n      localStorage.setItem('firstLogin', true);\n      window.location.href = \"/\";\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: loginSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }\n  }, \"Login\"), err && ShowErrMsg(err), success && ShowSuccessMsg(success), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    required: true,\n    placeholder: \"Email\",\n    value: user.email,\n    onChange: onChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    required: true,\n    autoComplete: \"on\",\n    placeholder: \"Password\",\n    value: user.password,\n    onChange: onChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, \"Register\"))));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/phuocnghia712/PBL6_Toystore/client/src/components/mainpages/auth/Login.js"],"names":["React","useState","Link","axios","ShowErrMsg","ShowSuccessMsg","initialState","email","password","err","success","Login","user","setUser","onChangeInput","e","name","value","target","loginSubmit","preventDefault","res","post","data","msg","localStorage","setItem","window","location","href","response"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport {Link} from 'react-router-dom'\nimport axios from 'axios'\nimport { ShowErrMsg, ShowSuccessMsg } from '../utils/notification/notification'\n\n\n////initial state\nconst initialState = {\n    email:'',\n    password: '',\n    err: '',\n    success : '',\n}\nfunction Login() {\n    const [user, setUser] = useState({initialState})\n    const {email,password,err,success} = user;    \n\n    const onChangeInput = e =>{\n        const {name, value} = e.target;\n        setUser({...user, [name]:value,err:'',success:''})\n    }\n\n    const loginSubmit = async e =>{\n        e.preventDefault()\n        try {\n          const res = await axios.post('/user/login', {...user})\n          setUser({...user,err:'',success:res.data.msg})\n            localStorage.setItem('firstLogin', true)\n            \n            window.location.href = \"/\";\n        } catch (err) {\n            err.response.data.msg && setUser({...user,err:err.response.data.msg,success:''})\n        }\n    }\n\n    return (\n        <div className=\"login-page\">\n            <form onSubmit={loginSubmit}>\n                <h2>Login</h2>\n                {err && ShowErrMsg(err)}\n                {success && ShowSuccessMsg(success)}\n                <input type=\"email\" name=\"email\" required\n                placeholder=\"Email\" value={user.email} onChange={onChangeInput} />\n\n                <input type=\"password\" name=\"password\" required autoComplete=\"on\"\n                placeholder=\"Password\" value={user.password} onChange={onChangeInput} />\n\n                <div className=\"row\">\n                    <button type=\"submit\">Login</button>\n                    <Link to=\"/register\">Register</Link>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}